<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shape Burst</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="tutorial-screen" class="hidden" role="dialog" aria-label="Tutorial screen">
        <h1>Welcome to Shape Burst!</h1>
        <p>Click the target shapes to score points. Match the objective!</p>
        <button id="close-tutorial" aria-label="Close tutorial">Got It!</button>
    </div>
    <div id="start-screen" role="region" aria-label="Start screen">
        <h1>Shape Burst</h1>
        <button id="start-game" aria-label="Start game">Start Game</button>
        <select id="theme-select" aria-label="Select theme">
            <option value="nebula">Nebula (Purple)</option>
            <option value="cosmic">Cosmic (Blue)</option>
            <option value="galactic">Galactic (Green)</option>
        </select>
    </div>
    <div id="game-ui" class="hidden" role="region" aria-label="Game interface">
        <div class="ui-item"><span class="label">Level</span><span id="level">1</span></div>
        <div class="ui-item"><span class="label">Score</span><span id="score">0</span></div>
        <div class="ui-item"><span class="label">Target</span><span id="target">20</span></div>
        <div class="ui-item"><span class="label">Time</span><span id="timer">30</span></div>
        <div class="ui-item"><span class="label">Combo</span><span id="combo">0</span></div>
        <button id="pause-game" aria-label="Pause or resume game">Pause</button>
    </div>
    <div id="center-objective" class="hidden" role="alert"></div>
    <div id="music-player" role="region" aria-label="Music player">
        <div id="visualizer" role="presentation"></div>
        <div id="player-controls">
            <button id="play-pause" class="play" aria-label="Play or pause music">▶</button>
            <div id="track-info">
                <img id="track-art" src="https://via.placeholder.com/50" alt="Track art">
                <span id="track-name">Track 1 - Ambient Space</span>
            </div>
            <select id="track-select" aria-label="Select music track">
                <option value="track1" data-art="https://via.placeholder.com/50/FF6F61">Track 1 - Ambient Space</option>
                <option value="track2" data-art="https://via.placeholder.com/50/6B7280">Track 2 - Cosmic Drift</option>
                <option value="track3" data-art="https://via.placeholder.com/50/88D498">Track 3 - Nebula Waves</option>
                <option value="track4" data-art="https://via.placeholder.com/50/FFD700">Track 4 - Star Pulse</option>
                <option value="track5" data-art="https://via.placeholder.com/50/FF00FF">Track 5 - Galactic Echo</option>
            </select>
        </div>
    </div>
    <div id="game-over" class="hidden" role="dialog" aria-label="Game over screen">
        <h1>Game Over</h1>
        <p>Final Score: <span id="final-score"></span></p>
        <div id="leaderboard">
            <h2>Leaderboard</h2>
            <ul id="leaderboard-list" aria-label="Leaderboard entries"></ul>
            <input type="text" id="player-name" placeholder="Enter your name" maxlength="10" aria-label="Enter player name">
            <button id="submit-score" aria-label="Submit score to leaderboard">Submit Score</button>
            <button id="clear-leaderboard" aria-label="Clear leaderboard">Clear Leaderboard</button>
        </div>
        <button id="restart" aria-label="Restart game">Restart</button>
    </div>
    <!-- New Menu Button -->
    <button id="menu-toggle" aria-label="Toggle main menu" title="Menu">☰</button>
    <!-- New Main Menu -->
    <div id="main-menu" class="hidden" role="dialog" aria-label="Main menu settings">
        <h2>Settings</h2>
        <label for="menu-theme-select">Theme:</label>
        <select id="menu-theme-select" aria-label="Select theme from menu">
            <option value="nebula">Nebula (Purple)</option>
            <option value="cosmic">Cosmic (Blue)</option>
            <option value="galactic">Galactic (Green)</option>
        </select>
        <label for="volume-control">Volume:</label>
        <input type="range" id="volume-control" min="0" max="1" step="0.1" value="1" aria-label="Adjust music volume">
        <label for="music-toggle">Music:</label>
        <input type="checkbox" id="music-toggle" checked aria-label="Toggle music on or off">
        <button id="close-menu" aria-label="Close main menu">Close</button>
    </div>
    <script type="importmap">
        {
            "imports": {
                "three": "https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.module.js",
                "three/addons/": "https://unpkg.com/three@0.134.0/examples/jsm/"
            }
        }
    </script>
    <script type="module" src="game.js"></script>
</body>
</html>